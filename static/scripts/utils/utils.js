define("utils/utils",["exports","utils/localization","underscore"],function(t,e,r){"use strict";function n(t){return'<iframe src="'+t+'" frameborder="0" style="width: 100%; height: 100%;"/>'}function i(t,e){for(var r in t){var n=t[r];if(E.isObject(n)){var a=e(n);a&&(t[r]=a),i(n,e)}}}function a(t){var e,r,n,i;return r=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim,e=t.replace(r,'<a href="$1" target="_blank">$1</a>'),n=/(^|[^\/])(www\.[\S]+(\b|$))/gim,e=e.replace(n,'$1<a href="http://$2" target="_blank">$2</a>'),i=/(([a-zA-Z0-9\-\_\.])+@[a-zA-Z\_]+?(\.[a-zA-Z]{2,6})+)/gim,e=e.replace(i,'<a href="mailto:$1">$1</a>')}function o(t){return JSON.parse(JSON.stringify(t)||null)}function u(t){return/^[\],:{}\s]*$/.test(t.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))}function s(t){return $("<div/>").text(t).html()}function l(t){if(t instanceof Array||(t=[t]),0===t.length)return!0;for(var e in t)if(["__null__","__undefined__",null,void 0].indexOf(t[e])>-1)return!0;return!1}function c(t){if($.isArray(t)){var e=(t=t.toString().replace(/,/g,", ")).lastIndexOf(", ");return-1!=e&&(t=t.substr(0,e)+" or "+t.substr(e+2)),t}return""}function f(t){top.__utils__get__=top.__utils__get__||{};var e=JSON.stringify(t);t.cache&&top.__utils__get__[e]?(t.success&&t.success(top.__utils__get__[e]),window.console.debug("utils.js::get() - Fetching from cache ["+t.url+"].")):d({url:t.url,data:t.data,success:function(r){top.__utils__get__[e]=r,t.success&&t.success(r)},error:function(e,r){t.error&&t.error(e,r)}})}function d(t){var e={contentType:"application/json",type:t.type||"GET",data:t.data||{},url:t.url};"GET"==e.type||"DELETE"==e.type?($.isEmptyObject(e.data)||(e.url+=-1==e.url.indexOf("?")?"?":"&",e.url+=$.param(e.data,!0)),e.data=null):(e.dataType="json",e.url=e.url,e.data=JSON.stringify(e.data)),$.ajax(e).done(function(e){if("string"==typeof e)try{e=e.replace("Infinity,",'"Infinity",'),e=$.parseJSON(e)}catch(t){console.debug(t)}t.success&&t.success(e)}).fail(function(e){var r=null;try{r=$.parseJSON(e.responseText)}catch(t){r=e.responseText}t.error&&t.error(r,e.status)}).always(function(){t.complete&&t.complete()})}function p(t,e){var r=$('<div class="'+t+'"></div>');r.appendTo(":eq(0)");var n=r.css(e);return r.remove(),n}function _(t){$('link[href^="'+t+'"]').length||$('<link href="'+Galaxy.root+t+'" rel="stylesheet">').appendTo("head")}function g(t,e){return t?E.defaults(t,e):e}function y(t,e){for(var r=1,n=0;n<e;n++)r*=10;return Math.round(t*r)/r}function h(t,e,r){r=void 0!==r?r:1;var n="";if(t>=N)t/=N,n="TB";else if(t>=J)t/=J,n="GB";else if(t>=k)t/=k,n="MB";else if(t>=M)t/=M,n="KB";else{if(!(t>0))return e?"0 b":"<strong>-</strong>";n="b"}var i="b"==n?t:y(t,r);return e?i+" "+n:"<strong>"+i+"</strong> "+n}function v(){return top.__utils__uid__=top.__utils__uid__||0,"uid-"+top.__utils__uid__++}function b(){var t=new Date,e=(t.getHours()<10?"0":"")+t.getHours(),r=(t.getMinutes()<10?"0":"")+t.getMinutes();return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()+", "+e+":"+r}function m(t){t.script&&""!==t.script&&$("<script/>",{type:"text/javascript"}).text(t.script).appendTo("head"),t.styles&&""!==t.styles&&$("<style/>",{type:"text/css"}).text(t.styles).appendTo("head")}function w(t){return decodeURIComponent(window.location.search.replace(new RegExp("^(?:.*[&\\?]"+encodeURIComponent(t).replace(/[\.\+\*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"))}function x(t){window.document.title=t?"Galaxy "+(window.Galaxy.config.brand?" | "+window.Galaxy.config.brand:"")+" | "+(0,G.default)(t):"Galaxy "+(window.Galaxy.config.brand?" | "+window.Galaxy.config.brand:"")}function S(t){var e,r,n=2166136261;for(e=0,r=t.length;e<r;e++)n^=t.charCodeAt(e),n+=(n<<1)+(n<<4)+(n<<7)+(n<<8)+(n<<24);return n>>>0}function T(t,e,r){return(255*t*299+255*e*587+255*r*114)/1e3>125?"black":"white"}function O(t,e,r){var n,i,a;if(0==e)n=i=a=r;else{var o=function(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t},u=r<.5?r*(1+e):r+e-r*e,s=2*r-u;n=o(s,u,t+1/3),i=o(s,u,t),a=o(s,u,t-1/3)}return[n,i,a]}function A(t){var e=S(t),r=Math.abs((e>>4)%360),n=75+(15&e),i="hsl("+r+", 100%, "+n+"%)",a="hsl("+r+", 100%, "+(n-40)+"%)",o=O(r,1,n/100),u=j(o,3);return"background-color: "+i+"; color: "+T(u[0],u[1],u[2])+"; border: 1px solid "+a}Object.defineProperty(t,"__esModule",{value:!0}),t.iframe=n,t.deepeach=i,t.linkify=a,t.clone=o,t.isJSON=u,t.sanitize=s,t.isEmpty=l,t.textify=c,t.get=f,t.request=d,t.cssGetAttribute=p,t.cssLoadFile=_,t.merge=g,t.roundToDecimalPlaces=y,t.bytesToString=h,t.uid=v,t.time=b,t.appendScriptStyle=m,t.getQueryString=w,t.setWindowTitle=x,t.generateTagStyle=A;var G=function(t){return t&&t.__esModule?t:{default:t}}(e),E=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r),j=function(){function t(t,e){var r=[],n=!0,i=!1,a=void 0;try{for(var o,u=t[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!e||r.length!==e);n=!0);}catch(t){i=!0,a=t}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),M=1024,k=M*M,J=k*M,N=J*M;t.default={cssLoadFile:_,cssGetAttribute:p,get:f,merge:g,iframe:n,bytesToString:h,uid:v,time:b,request:d,sanitize:s,textify:c,isEmpty:l,deepeach:i,isJSON:u,clone:o,linkify:a,appendScriptStyle:m,getQueryString:w,setWindowTitle:x,generateTagStyle:A}});