(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1008:function(e,t,a){},1252:function(e,t,a){var r={"./af":1009,"./af.js":1009,"./ar":1010,"./ar-dz":1011,"./ar-dz.js":1011,"./ar-kw":1012,"./ar-kw.js":1012,"./ar-ly":1013,"./ar-ly.js":1013,"./ar-ma":1014,"./ar-ma.js":1014,"./ar-sa":1015,"./ar-sa.js":1015,"./ar-tn":1016,"./ar-tn.js":1016,"./ar.js":1010,"./az":1017,"./az.js":1017,"./be":1018,"./be.js":1018,"./bg":1019,"./bg.js":1019,"./bm":1020,"./bm.js":1020,"./bn":1021,"./bn.js":1021,"./bo":1022,"./bo.js":1022,"./br":1023,"./br.js":1023,"./bs":1024,"./bs.js":1024,"./ca":1025,"./ca.js":1025,"./cs":1026,"./cs.js":1026,"./cv":1027,"./cv.js":1027,"./cy":1028,"./cy.js":1028,"./da":1029,"./da.js":1029,"./de":1030,"./de-at":1031,"./de-at.js":1031,"./de-ch":1032,"./de-ch.js":1032,"./de.js":1030,"./dv":1033,"./dv.js":1033,"./el":1034,"./el.js":1034,"./en-au":1035,"./en-au.js":1035,"./en-ca":1036,"./en-ca.js":1036,"./en-gb":1037,"./en-gb.js":1037,"./en-ie":1038,"./en-ie.js":1038,"./en-nz":1039,"./en-nz.js":1039,"./eo":1040,"./eo.js":1040,"./es":1041,"./es-do":1042,"./es-do.js":1042,"./es-us":1043,"./es-us.js":1043,"./es.js":1041,"./et":1044,"./et.js":1044,"./eu":1045,"./eu.js":1045,"./fa":1046,"./fa.js":1046,"./fi":1047,"./fi.js":1047,"./fo":1048,"./fo.js":1048,"./fr":1049,"./fr-ca":1050,"./fr-ca.js":1050,"./fr-ch":1051,"./fr-ch.js":1051,"./fr.js":1049,"./fy":1052,"./fy.js":1052,"./gd":1053,"./gd.js":1053,"./gl":1054,"./gl.js":1054,"./gom-latn":1055,"./gom-latn.js":1055,"./gu":1056,"./gu.js":1056,"./he":1057,"./he.js":1057,"./hi":1058,"./hi.js":1058,"./hr":1059,"./hr.js":1059,"./hu":1060,"./hu.js":1060,"./hy-am":1061,"./hy-am.js":1061,"./id":1062,"./id.js":1062,"./is":1063,"./is.js":1063,"./it":1064,"./it.js":1064,"./ja":1065,"./ja.js":1065,"./jv":1066,"./jv.js":1066,"./ka":1067,"./ka.js":1067,"./kk":1068,"./kk.js":1068,"./km":1069,"./km.js":1069,"./kn":1070,"./kn.js":1070,"./ko":1071,"./ko.js":1071,"./ky":1072,"./ky.js":1072,"./lb":1073,"./lb.js":1073,"./lo":1074,"./lo.js":1074,"./lt":1075,"./lt.js":1075,"./lv":1076,"./lv.js":1076,"./me":1077,"./me.js":1077,"./mi":1078,"./mi.js":1078,"./mk":1079,"./mk.js":1079,"./ml":1080,"./ml.js":1080,"./mr":1081,"./mr.js":1081,"./ms":1082,"./ms-my":1083,"./ms-my.js":1083,"./ms.js":1082,"./mt":1084,"./mt.js":1084,"./my":1085,"./my.js":1085,"./nb":1086,"./nb.js":1086,"./ne":1087,"./ne.js":1087,"./nl":1088,"./nl-be":1089,"./nl-be.js":1089,"./nl.js":1088,"./nn":1090,"./nn.js":1090,"./pa-in":1091,"./pa-in.js":1091,"./pl":1092,"./pl.js":1092,"./pt":1093,"./pt-br":1094,"./pt-br.js":1094,"./pt.js":1093,"./ro":1095,"./ro.js":1095,"./ru":1096,"./ru.js":1096,"./sd":1097,"./sd.js":1097,"./se":1098,"./se.js":1098,"./si":1099,"./si.js":1099,"./sk":1100,"./sk.js":1100,"./sl":1101,"./sl.js":1101,"./sq":1102,"./sq.js":1102,"./sr":1103,"./sr-cyrl":1104,"./sr-cyrl.js":1104,"./sr.js":1103,"./ss":1105,"./ss.js":1105,"./sv":1106,"./sv.js":1106,"./sw":1107,"./sw.js":1107,"./ta":1108,"./ta.js":1108,"./te":1109,"./te.js":1109,"./tet":1110,"./tet.js":1110,"./th":1111,"./th.js":1111,"./tl-ph":1112,"./tl-ph.js":1112,"./tlh":1113,"./tlh.js":1113,"./tr":1114,"./tr.js":1114,"./tzl":1115,"./tzl.js":1115,"./tzm":1116,"./tzm-latn":1117,"./tzm-latn.js":1117,"./tzm.js":1116,"./uk":1118,"./uk.js":1118,"./ur":1119,"./ur.js":1119,"./uz":1120,"./uz-latn":1121,"./uz-latn.js":1121,"./uz.js":1120,"./vi":1122,"./vi.js":1122,"./x-pseudo":1123,"./x-pseudo.js":1123,"./yo":1124,"./yo.js":1124,"./zh-cn":1125,"./zh-cn.js":1125,"./zh-hk":1126,"./zh-hk.js":1126,"./zh-tw":1127,"./zh-tw.js":1127};function n(e){var t=s(e);return a(t)}function s(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=s,e.exports=n,n.id=1252},1253:function(e,t,a){var r={"./af":1129,"./af.js":1129,"./ar":1130,"./ar-dz":1131,"./ar-dz.js":1131,"./ar-kw":1132,"./ar-kw.js":1132,"./ar-ly":1133,"./ar-ly.js":1133,"./ar-ma":1134,"./ar-ma.js":1134,"./ar-sa":1135,"./ar-sa.js":1135,"./ar-tn":1136,"./ar-tn.js":1136,"./ar.js":1130,"./az":1137,"./az.js":1137,"./be":1138,"./be.js":1138,"./bg":1139,"./bg.js":1139,"./bm":1140,"./bm.js":1140,"./bn":1141,"./bn.js":1141,"./bo":1142,"./bo.js":1142,"./br":1143,"./br.js":1143,"./bs":1144,"./bs.js":1144,"./ca":1145,"./ca.js":1145,"./cs":1146,"./cs.js":1146,"./cv":1147,"./cv.js":1147,"./cy":1148,"./cy.js":1148,"./da":1149,"./da.js":1149,"./de":1150,"./de-at":1151,"./de-at.js":1151,"./de-ch":1152,"./de-ch.js":1152,"./de.js":1150,"./dv":1153,"./dv.js":1153,"./el":1154,"./el.js":1154,"./en-au":1155,"./en-au.js":1155,"./en-ca":1156,"./en-ca.js":1156,"./en-gb":1157,"./en-gb.js":1157,"./en-ie":1158,"./en-ie.js":1158,"./en-il":1159,"./en-il.js":1159,"./en-nz":1160,"./en-nz.js":1160,"./eo":1161,"./eo.js":1161,"./es":1162,"./es-do":1163,"./es-do.js":1163,"./es-us":1164,"./es-us.js":1164,"./es.js":1162,"./et":1165,"./et.js":1165,"./eu":1166,"./eu.js":1166,"./fa":1167,"./fa.js":1167,"./fi":1168,"./fi.js":1168,"./fo":1169,"./fo.js":1169,"./fr":1170,"./fr-ca":1171,"./fr-ca.js":1171,"./fr-ch":1172,"./fr-ch.js":1172,"./fr.js":1170,"./fy":1173,"./fy.js":1173,"./gd":1174,"./gd.js":1174,"./gl":1175,"./gl.js":1175,"./gom-latn":1176,"./gom-latn.js":1176,"./gu":1177,"./gu.js":1177,"./he":1178,"./he.js":1178,"./hi":1179,"./hi.js":1179,"./hr":1180,"./hr.js":1180,"./hu":1181,"./hu.js":1181,"./hy-am":1182,"./hy-am.js":1182,"./id":1183,"./id.js":1183,"./is":1184,"./is.js":1184,"./it":1185,"./it.js":1185,"./ja":1186,"./ja.js":1186,"./jv":1187,"./jv.js":1187,"./ka":1188,"./ka.js":1188,"./kk":1189,"./kk.js":1189,"./km":1190,"./km.js":1190,"./kn":1191,"./kn.js":1191,"./ko":1192,"./ko.js":1192,"./ky":1193,"./ky.js":1193,"./lb":1194,"./lb.js":1194,"./lo":1195,"./lo.js":1195,"./lt":1196,"./lt.js":1196,"./lv":1197,"./lv.js":1197,"./me":1198,"./me.js":1198,"./mi":1199,"./mi.js":1199,"./mk":1200,"./mk.js":1200,"./ml":1201,"./ml.js":1201,"./mn":1202,"./mn.js":1202,"./mr":1203,"./mr.js":1203,"./ms":1204,"./ms-my":1205,"./ms-my.js":1205,"./ms.js":1204,"./mt":1206,"./mt.js":1206,"./my":1207,"./my.js":1207,"./nb":1208,"./nb.js":1208,"./ne":1209,"./ne.js":1209,"./nl":1210,"./nl-be":1211,"./nl-be.js":1211,"./nl.js":1210,"./nn":1212,"./nn.js":1212,"./pa-in":1213,"./pa-in.js":1213,"./pl":1214,"./pl.js":1214,"./pt":1215,"./pt-br":1216,"./pt-br.js":1216,"./pt.js":1215,"./ro":1217,"./ro.js":1217,"./ru":1218,"./ru.js":1218,"./sd":1219,"./sd.js":1219,"./se":1220,"./se.js":1220,"./si":1221,"./si.js":1221,"./sk":1222,"./sk.js":1222,"./sl":1223,"./sl.js":1223,"./sq":1224,"./sq.js":1224,"./sr":1225,"./sr-cyrl":1226,"./sr-cyrl.js":1226,"./sr.js":1225,"./ss":1227,"./ss.js":1227,"./sv":1228,"./sv.js":1228,"./sw":1229,"./sw.js":1229,"./ta":1230,"./ta.js":1230,"./te":1231,"./te.js":1231,"./tet":1232,"./tet.js":1232,"./tg":1233,"./tg.js":1233,"./th":1234,"./th.js":1234,"./tl-ph":1235,"./tl-ph.js":1235,"./tlh":1236,"./tlh.js":1236,"./tr":1237,"./tr.js":1237,"./tzl":1238,"./tzl.js":1238,"./tzm":1239,"./tzm-latn":1240,"./tzm-latn.js":1240,"./tzm.js":1239,"./ug-cn":1241,"./ug-cn.js":1241,"./uk":1242,"./uk.js":1242,"./ur":1243,"./ur.js":1243,"./uz":1244,"./uz-latn":1245,"./uz-latn.js":1245,"./uz.js":1244,"./vi":1246,"./vi.js":1246,"./x-pseudo":1247,"./x-pseudo.js":1247,"./yo":1248,"./yo.js":1248,"./zh-cn":1249,"./zh-cn.js":1249,"./zh-hk":1250,"./zh-hk.js":1250,"./zh-tw":1251,"./zh-tw.js":1251};function n(e){var t=s(e);return a(t)}function s(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=s,e.exports=n,n.id=1253},1255:function(e,t,a){"use strict";var r=a(1008);a.n(r).a},162:function(e,t,a){"use strict";var r=a(0),n=a.n(r),s=a(4),i=a(8);t.a={AUTO_EXTENSION:{id:"auto",text:"Auto-detect",description:"This system will try to detect the file type automatically. If your file is not detected properly as one of the known formats, it most likely means that it has some format problems (e.g., different number of columns on different rows). You can still coerce the system to set your data to the format you think it should be.  You can also upload compressed files, which will automatically be decompressed."},DEFAULT_GENOME:"?",DEFAULT_EXTENSION:"auto",getRemoteFiles:function(e,t){return n.a.ajax({url:"".concat(Object(s.getAppRoot)(),"api/remote_files"),method:"GET",success:e,error:t})},getUploadDatatypes:function(e,t,a){i.a.get({url:"".concat(Object(s.getAppRoot)(),"api/datatypes?extension_only=False"),success:function(r){var n=[];for(var s in r)n.push({id:r[s].extension,text:r[s].extension,description:r[s].description,description_url:r[s].description_url,composite_files:r[s].composite_files});n.sort(function(e,t){var a=e.text&&e.text.toLowerCase(),r=t.text&&t.text.toLowerCase();return a>r?1:a<r?-1:0}),t||n.unshift(a),e(n)}})},getUploadGenomes:function(e,t){i.a.get({url:"".concat(Object(s.getAppRoot)(),"api/genomes"),success:function(a){var r=[];for(var n in a)r.push({id:a[n][1],text:a[n][0]});r.sort(function(e,a){return e.id==t?-1:a.id==t?1:e.text>a.text?1:e.text<a.text?-1:0}),e(r)}})}}},299:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(1),i=a.n(s),l=a(4),o=a(5),u=a(52),d=a(13),c=a.n(d),p=a(2),m=a.n(p),v=a(998),h=a.n(v),f=a(162),g=a(81),y=a(57),_=a(12),b=a(26),C=a.n(b),j={props:["options","value","placeholder"],render:function(){var e=this.$createElement;return(this._self._c||e)("select",[this._t("default")],2)},staticRenderFns:[],mounted:function(){var e=this;n()(this.$el).select2({data:this.options,placeholder:this.placeholder,allowClear:this.placeholder}).val(this.value).trigger("change").on("change",function(t){e.$emit("input",t.val)})},watch:{value:function(e){n()(this.$el).val(e)},options:function(e){n()(this.$el).empty().select2({data:e})}},destroyed:function(){n()(this.$el).off().select2("destroy")}};_.a.use(C.a);var T=y.a.RULES,w=y.a.MAPPING_TARGETS,x={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.multiple&&e.ordered?a("div",{staticClass:"rule-column-selector"},[a("span",[e._v(e._s(e.label))]),e._v(" "),e._t("default"),e._v(" "),a("ol",[e._l(e.target,function(t,r){return a("li",{key:t,staticClass:"rule-column-selector-target",attrs:{index:r}},[e._v("\n                    "+e._s(e.colHeaders[t])+"\n                    "),a("span",{staticClass:"fa fa-times rule-column-selector-target-remove",on:{click:function(t){return e.handleRemove(r)}}}),e._v(" "),0!==r?a("span",{staticClass:"fa fa-arrow-up rule-column-selector-up",on:{click:function(t){return e.moveUp(r)}}}):e._e(),e._v(" "),r<e.target.length-1?a("span",{staticClass:"fa fa-arrow-down rule-column-selector-down",on:{click:function(t){return e.moveUp(r+1)}}}):e._e()])}),e._v(" "),this.target.length<this.colHeaders.length?a("li",[e.orderedEdit?a("span",{staticClass:"rule-column-selector-target-select"},[a("select2",{attrs:{placeholder:"Select a column"},on:{input:e.handleAdd}},[a("option"),e._v(" "),e._l(e.remainingHeaders,function(t,r){return a("option",{domProps:{value:r}},[e._v(e._s(t))])})],2)],1):a("span",{staticClass:"rule-column-selector-target-add"},[a("i",{on:{click:function(t){return e.$emit("update:orderedEdit",!0)}}},[e._v("... "+e._s(e.l("Assign Another Column")))])])]):e._e()],2)],2):a("div",{staticClass:"rule-column-selector"},[a("label",{staticClass:"d-flex justify-content-end align-items-center"},[a("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mr-auto",attrs:{title:e.help}},[e._v(e._s(e.label))]),e._v(" "),a("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mr-1",attrs:{title:e.title}},[a("select2",{attrs:{value:e.target,multiple:e.multiple},on:{input:e.handleInput}},e._l(e.colHeaders,function(t,r){return a("option",{domProps:{value:r}},[e._v(e._s(t))])}),0)],1),e._v(" "),e._t("default")],2)])},staticRenderFns:[],data:function(){return{l:m.a}},props:{target:{required:!0},label:{required:!1,type:String,default:m()("From Column")},help:{required:!1},colHeaders:{type:Array,required:!0},multiple:{type:Boolean,required:!1,default:!1},ordered:{type:Boolean,required:!1,default:!1},valueAsList:{type:Boolean,required:!1,default:!1},orderedEdit:{type:Boolean,required:!1,default:!1}},computed:{remainingHeaders:function(){var e=this.colHeaders;if(!this.multiple)return e;var t={};for(var a in e)-1===this.target.indexOf(parseInt(a))&&(t[a]=e[a]);return t},title:function(){return m()("Select a column")}},methods:{handleInput:function(e){if(this.multiple){var t=e.map(function(e){return parseInt(e)});this.$emit("update:target",t)}else{var a=parseInt(e);this.valueAsList&&(a=[a]),this.$emit("update:target",a)}},handleAdd:function(e){this.target.push(parseInt(e)),this.$emit("update:orderedEdit",!1)},handleRemove:function(e){this.target.splice(e,1)},moveUp:function(e){var t=this.target[e-1];_.a.set(this.target,e-1,this.target[e]),_.a.set(this.target,e,t)}},components:{Select2:j}},R={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("label",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{for:"regular_expression",title:e.title}},[e._v(e._s(e.label))]),e._v(" "),a("span",{directives:[{name:"b-popover",rawName:"v-b-popover.html",value:e.popoverContent,expression:"popoverContent",modifiers:{html:!0}}],staticClass:"fa fa-question",attrs:{title:e.popoverTitle}}),e._v(" "),a("input",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.left",modifiers:{hover:!0,left:!0}}],staticClass:"rule-regular-expression",attrs:{title:e.title,name:"regular_expression",type:"text"},domProps:{value:e.target},on:{input:function(t){return e.$emit("update:target",t.target.value)}}})])},staticRenderFns:[],props:{target:{required:!0}},computed:{label:function(){return m()("Regular Expression")},title:function(){return m()("Enter a regular expression.")},popoverTitle:function(){return m()("Regular Expressions")},popoverContent:function(){return m()('Regular expressions are patterns used to match character combinations in strings. This input accepts Python-style regular expressions, find more information about these in <a href="https://pythonforbiologists.com/regular-expressions/">this Python for Biologists tutorial</a>.')}}},F={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",{staticClass:"rule"},[a("span",{staticClass:"rule-display"},[a("span",{staticClass:"mr-1"},[e._v(e._s(e.title))]),e._v(" "),a("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-edit mr-1",attrs:{title:e.editTitle},on:{click:e.edit}}),e._v(" "),a("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-times map",attrs:{title:e.removeTitle},on:{click:e.remove}})]),e._v(" "),e.rule.warn?a("span",{staticClass:"rule-warning"},[e._v("\n                "+e._s(e.rule.warn)+"\n            ")]):e._e(),e._v(" "),e.rule.error?a("span",{staticClass:"rule-error"},[a("span",{staticClass:"alert-message"},[e._v(e._s(e.rule.error))])]):e._e()])},staticRenderFns:[],props:{rule:{required:!0,type:Object},colHeaders:{type:Array,required:!0}},computed:{title:function(){var e=this.rule.type;return T[e].display(this.rule,this.colHeaders)},editTitle:function(){return m()("Edit this rule.")},removeTitle:function(){return m()("Remove this rule.")}},methods:{edit:function(){this.$emit("edit")},remove:function(){this.$emit("remove")}}},k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",{staticClass:"rule"},[a("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:e.help}},[e._v("Set "+e._s(e.columnsLabel)+" as "+e._s(e.typeDisplay))]),e._v(" "),a("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-edit",attrs:{title:e.titleEdit},on:{click:e.edit}}),e._v(" "),a("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-times",attrs:{title:e.titleRemove},on:{click:e.remove}})])},staticRenderFns:[],props:{type:{type:String,required:!0},columns:{required:!0},colHeaders:{type:Array,required:!0}},methods:{remove:function(){this.$emit("remove")},edit:function(){this.$emit("edit")}},computed:{typeDisplay:function(){return w[this.type].label},help:function(){return w[this.type].help||""},titleEdit:function(){return m()("Edit column definition")},titleRemove:function(){return m()("Remove this column definition")},columnsLabel:function(){return y.a.columnDisplay(this.columns,this.colHeaders)}}},S={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("a",{staticClass:"rule-link dropdown-item",class:e.linkClassName,attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.builder.addNewRule(e.ruleType)}}},[e._v(e._s(e.title))])},staticRenderFns:[],props:{ruleType:{type:String,required:!0},builder:{required:!0}},computed:{linkClassName:function(){return"rule-link-"+this.ruleType.replace(/_/g,"-")},title:function(){return T[this.ruleType].title}}},E={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.ruleType==e.displayRuleType?a("div",{staticClass:"rule-editor",class:e.typeToClass},[e._t("default"),e._v(" "),a("div",{staticClass:"buttons rule-edit-buttons d-flex justify-content-end"},[a("button",{staticClass:"btn rule-editor-cancel mr-1",attrs:{type:"button"},on:{click:e.cancel}},[e._v(e._s(e.cancelLabel))]),e._v(" "),a("button",{staticClass:"btn btn-primary rule-editor-ok",attrs:{type:"button"},on:{click:e.okay}},[e._v(e._s(e.applyLabel))])])],2):e._e()},staticRenderFns:[],data:function(){return{applyLabel:m()("Apply"),cancelLabel:m()("Cancel")}},props:{ruleType:{type:String,required:!0},displayRuleType:{required:!0},builder:{required:!0}},methods:{cancel:function(){this.builder.displayRuleType=null},okay:function(){this.builder.handleRuleSave(this.ruleType),this.cancel()}},computed:{typeToClass:function(){return"rule-edit-"+this.ruleType.replace(/_/g,"-")}}},N={data:function(){var e,t,a="vertical";if(this.initialRules)e=this.initialRules.mapping.slice(),t=this.initialRules.rules.slice();else if(e="ftp"==this.elementsType?[{type:"ftp_path",columns:[0]}]:"datasets"==this.elementsType?[{type:"list_identifiers",columns:[1]}]:[],t=[],"collection_contents"==this.elementsType)if(null!==this.initialElements){var r=this.initialElements.collection_type.split(":");for(var n in r)t.push({type:"add_column_metadata",value:"identifier"+n})}else a="horizontal",t.push({type:"add_column_metadata",value:"identifier0"});else"datasets"==this.elementsType?t.push({type:"add_column_metadata",value:"hid"},{type:"add_column_metadata",value:"name"}):"library_datasets"==this.elementsType?t.push({type:"add_column_metadata",value:"name"}):"ftp"==this.elementsType&&t.push({type:"add_column_metadata",value:"path"});return{rules:t,mapping:e,state:"build",ruleView:"normal",ruleSource:"",ruleSourceJson:null,ruleSourceError:null,errorMessage:"",jaggedData:!1,waitingJobState:"new",titleReset:m()("Undo all reordering and discards"),titleNumericSort:m()("By default columns will be sorted lexicographically, check this option if the columns are numeric values and should be sorted as numbers"),titleInvertFilterRegex:m()("Remove rows not matching the specified regular expression at specified column"),titleInvertFilterEmpty:m()("Remove rows that have non-empty values at specified column"),titleInvertFilterMatches:m()("Remove rows not matching supplied value"),titleViewSource:m()("Advanced Option: View and or edit the JSON representation of the rules to apply to this tabular data"),titleSourceCancel:m()("Stop editing rules and dismiss changes"),titleSourceReset:m()("Reset text area to current set of rules"),titleSourceApply:m()("Apply changes to rule source and return to rule preview"),titleRulesMenu:m()("General rules to apply"),titleFilterMenu:m()("Rules that filter rows from the data"),titleColumMenu:m()("Rules that generate new columns"),titleRemoveMapping:m()("Remove column definition assignment"),titleApplyColumnDefinitions:m()("Apply these column definitions and return to rules preview"),titleErrorOkay:m()("Dismiss this error and return to the rule builder to try again with new rules"),namePlaceholder:m()("Enter a name for your new collection"),activeRuleIndex:null,addColumnRegexTarget:0,addColumnBasenameTarget:0,addColumnRegexExpression:"",addColumnRegexReplacement:null,addColumnRegexGroupCount:null,addColumnRegexType:"global",addColumnMetadataValue:0,addColumnGroupTagValueValue:"",addColumnGroupTagValueDefault:"",addColumnConcatenateTarget0:0,addColumnConcatenateTarget1:0,addColumnRownumStart:1,addColumnSubstrTarget:0,addColumnSubstrType:"keep_prefix",addColumnSubstrLength:1,addColumnValue:"",removeColumnTargets:[],addFilterRegexTarget:0,addFilterRegexExpression:"",addFilterRegexInvert:!1,addFilterMatchesTarget:0,addFilterMatchesValue:"",addFilterMatchesInvert:!1,addFilterEmptyTarget:0,addFilterEmptyInvert:!1,addFilterCompareTarget:0,addFilterCompareValue:0,addFilterCompareType:"less_than",addFilterCountN:1,addFilterCountInvert:!1,addFilterCountWhich:"first",addSortingTarget:0,addSortingNumeric:!1,splitColumnsTargets0:[],splitColumnsTargets1:[],swapColumnsTarget0:0,swapColumnsTarget1:0,collectionName:"",displayRuleType:null,extensions:[],extension:null,genomes:[],genome:null,hideSourceItems:this.defaultHideSourceItems,addNameTag:!1,orientation:a}},props:{initialElements:{required:!0},importType:{type:String,required:!1,default:"collections"},elementsType:{type:String,required:!1,default:"datasets"},creationFn:{required:!1,type:Function},saveRulesFn:{required:!1,type:Function},initialRules:{required:!1,type:Object},defaultHideSourceItems:{type:Boolean,required:!1,default:!0},oncancel:{required:!0,type:Function},oncreate:{required:!0,type:Function},ftpUploadSite:{type:String,required:!1,default:null}},computed:{exisistingDatasets:function(){var e=this.elementsType;return"datasets"===e||"collection_contents"===e||"library_datasets"===e},showFileTypeSelector:function(){return!this.exisistingDatasets&&!this.mappingAsDict.file_type},showGenomeSelector:function(){return!this.exisistingDatasets&&!this.mappingAsDict.dbkey},showCollectionNameInput:function(){return"collections"==this.importType&&"collection_contents"!=this.elementsType&&!this.mappingAsDict.collection_name},showAddNameTag:function(){return"collections"==this.importType&&"collection_contents"!=this.elementsType},titleFinish:function(){return"datasets"==this.elementsType||"library_datasets"==this.elementsType?m()("Create new collection from specified rules and datasets"):"collection_contents"==this.elementsType?m()("Save rules and return to tool form"):m()("Upload collection using specified rules")},titleCancel:function(){return"datasets"==this.importType?m()("Close this modal and do not upload any datasets"):m()("Close this modal and do not create any collections")},finishButtonTitle:function(){return"datasets"==this.elementsType||"library_datasets"==this.elementsType?m()("Create"):"collection_contents"==this.elementsType?m()("Save"):m()("Upload")},hasActiveMappingEdit:function(){return i.a.any(i.a.values(this.mapping),function(e){return e.editing})},activeRule:function(){return null!==this.activeRuleIndex&&this.rules[this.activeRuleIndex]},activeRuleColHeaders:function(){return null!==this.activeRuleIndex&&this.colHeadersPerRule[this.activeRuleIndex]||this.colHeaders},horizontal:function(){return"horizontal"==this.orientation},vertical:function(){return"vertical"==this.orientation},mappedTargets:function(){var e=[],t=!0,a=!1,r=void 0;try{for(var n,s=this.mapping[Symbol.iterator]();!(t=(n=s.next()).done);t=!0){var i=n.value;e.push(i.type)}}catch(e){a=!0,r=e}finally{try{t||null==s.return||s.return()}finally{if(a)throw r}}return e},unmappedTargets:function(){var e=[],t=this.mappedTargets;for(var a in w){var r=w[a].modes;if(!(r&&r.indexOf(this.elementsType)<0)){var n=w[a],s=n.importType;s&&this.importType!=s||!this.ftpUploadSite&&n.requiresFtp||t.indexOf(a)<0&&e.push(a)}}return e},colHeaders:function(){var e=this.hotData,t=e.data,a=e.columns;return y.a.colHeadersFor(t,a)},colHeadersDisplay:function(){var e=[];for(var t in this.colHeaders){var a=this.colHeaders[t];e[t]="<b>".concat(i.a.escape(a),"</b>");var r=[],n=!0,s=!1,l=void 0;try{for(var o,u=this.mapping[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var d=o.value;if(-1!==d.columns.indexOf(parseInt(t))){var c=w[d.type];r.push("<i>".concat(i.a.escape(c.columnHeader||c.label),"</i>"))}}}catch(e){s=!0,l=e}finally{try{n||null==u.return||u.return()}finally{if(s)throw l}}1==r.length?e[t]+=" (".concat(r[0],")"):r.length>1&&(e[t]+=" (".concat([r.slice(0,-1).join(", "),r.slice(-1)[0]].join(" & "),")"))}return e},mappingAsDict:function(){var e={},t=!0,a=!1,r=void 0;try{for(var n,s=this.mapping[Symbol.iterator]();!(t=(n=s.next()).done);t=!0){var i=n.value;e[i.type]=i}}catch(e){a=!0,r=e}finally{try{t||null==s.return||s.return()}finally{if(a)throw r}}return e},metadataOptions:function(){var e={};if("collection_contents"==this.elementsType){var t=(this.initialElements?this.initialElements.collection_type:"list:list:list:paired").split(":");for(var a in t){var r=t[a];e["identifier"+a]="list"==r?m()("List Identifier ")+(parseInt(a)+1):m()("Paired Identifier")}e.tags=m()("Tags")}else"ftp"==this.elementsType?e.path=m()("Path"):"library_datasets"==this.elementsType?e.name=m()("Name"):"datasets"==this.elementsType?(e.hid=m()("History ID (hid)"),e.name=m()("Name")):e=null;return e},hasTagsMetadata:function(){return"collection_contents"==this.elementsType},collectionType:function(){var e=[];this.mappingAsDict.list_identifiers&&(e=this.mappingAsDict.list_identifiers.columns);var t=e.map(function(e){return"list"}).join(":");return this.mappingAsDict.paired_identifier&&(t?t+=":paired":t="paired"),t},validInput:function(){var e=this.identifierColumns(),t=this.mappingAsDict,a="collections"==this.importType,r=!0;a&&"collection_contents"!=this.elementsType&&!t.collection_name&&(r=this.collectionName.length>0),t.ftp_path&&t.url&&(r=!1),!("ftp"==this.elementsType||"raw"==this.elementsType)||t.ftp_path||t.url||(r=!1);var n=!0,s=!1,i=void 0;try{for(var l,o=this.rules[Symbol.iterator]();!(n=(l=o.next()).done);n=!0){l.value.error&&(r=!1)}}catch(e){s=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(s)throw i}}return a&&0==e.length&&(r=!1),r},hotData:function(){var e,t,a;if("datasets"==this.elementsType||"library_datasets"==this.elementsType||"ftp"==this.elementsType)e=(t=this.initialElements.slice()).map(function(e){return[]}),a=[];else if("collection_contents"==this.elementsType){var r=this.initialElements;if(r){var n=this.populateElementsFromCollectionDescription(r.elements,r.collection_type);e=n.data,t=n.sources,a=[]}else e=[],t=[],a=[]}else t=(e=this.initialElements.slice()).map(function(e){return null}),a=[],this.initialElements&&this.initialElements[0].forEach(function(){return a.push("new")});return y.a.applyRules(e,t,a,this.rules)},colHeadersPerRule:function(){return this.hotData.colHeadersPerRule}},methods:{l:function(e){return m()(e)},cancel:function(){this.oncancel()},mappingTargets:function(){return w},resetRules:function(){this.rules.splice(0,this.rules.length),this.mapping.splice(0,this.mapping.length)},resetRulesAndState:function(){this.resetRules(),this.state="build",this.errorMessage="",this.collectionName=""},addNewRule:function(e){T[e].init(this),this.displayRuleType=e,this.activeRuleIndex=null},handleRuleSave:function(e){var t=this.activeRule;if(t)T[e].save(this,t);else{var a={type:e};T[e].save(this,a),this.rules.push(a)}},viewSource:function(){this.resetSource(),this.ruleView="source"},resetSource:function(){var e={rules:this.rules,mapping:this.mapping};this.exisistingDatasets||(this.extension!==f.a.DEFAULT_EXTENSION&&(e.extension=this.extension),this.genome!==f.a.DEFAULT_GENOME&&(e.genome=this.genome)),this.ruleSourceJson=e,this.ruleSource=JSON.stringify(e,function(e,t){if("error"!=e&&"warn"!=e)return t},"  "),this.ruleSourceError=null},attemptRulePreview:function(){var e;this.ruleSourceError=null;try{e=JSON.parse(this.ruleSource)}catch(e){return void(this.ruleSourceError="Problem parsing your rules.")}this.updateFromSource(e),this.ruleView="normal"},cancelSourceEdit:function(){this.ruleSourceError=null,this.ruleView="normal"},updateFromSource:function(e){this.resetRules(),e.extension&&(this.extension=e.extension),e.genome&&(this.genome=e.genome),e.rules&&(this.rules=e.rules),e.mapping&&(this.mapping=e.mapping)},addIdentifier:function(e){var t=this.mappingTargets()[e].multiple,a=t?[]:[0];this.mapping.push({type:e,columns:a,editing:t})},editRule:function(e,t){var a=e.type;this.activeRuleIndex=t,T[a].init(this,e),this.displayRuleType=a},removeRule:function(e){this.rules.splice(e,1)},removeMapping:function(e){this.mapping.splice(e,1)},refreshAndWait:function(e){var t=Object(o.a)();t&&t.currHistoryPanel&&t.currHistoryPanel.refreshContents(),this.waitOnJob(e)},waitOnJob:function(e){var t=this,a=e.data.jobs[0].id,r=function(e){var r=e.data.state;if(t.waitingJobState=r,-1!==g.a.NON_TERMINAL_STATES.indexOf(r))setTimeout(n,1e3);else if(-1!==g.a.ERROR_STATES.indexOf(r))t.state="error",t.errorMessage="Unknown error encountered while running your upload job, this could be a server issue or a problem with the upload definition.",t.doFullJobCheck(a);else{var s=Object(o.a)();(s&&s.currHistoryPanel&&s.currHistoryPanel.model).refresh(),t.oncreate()}},n=function(){c.a.get("".concat(Object(l.getAppRoot)(),"api/jobs/").concat(a)).then(r).catch(t.renderFetchError)};setTimeout(n,1e3)},doFullJobCheck:function(e){var t=this;c.a.get("".concat(Object(l.getAppRoot)(),"api/jobs/").concat(e,"?full=True")).then(function(e){var a=e.data.stderr;if(a){var r="An error was encountered while running your upload job. ";a.indexOf("binary file contains inappropriate content")>-1&&(r+="The problem may be that the batch uploader will not automatically decompress your files the way the normal uploader does, please specify a correct extension or upload decompressed data."),r+="Upload job completed with standard error: "+a,t.errorMessage=r}}).catch(this.renderFetchError)},renderFetchError:function(e){this.state="error",e.response?(console.log(e.response),this.errorMessage=e.response.data.err_msg):(console.log(e),this.errorMessage="Unknown error encountered: "+e)},swapOrientation:function(){this.orientation="horizontal"==this.orientation?"vertical":"horizontal";var e=this.$refs.hotTable.table;"horizontal"==this.orientation?this.$nextTick(function(){var t=n()(".rule-builder-body").width();e.updateSettings({width:t})}):this.$nextTick(function(){var t=n()(".rule-builder-body").width();e.updateSettings({width:t-270})})},createCollection:function(){var e=this;this.state="wait";var t=this.collectionName,a=this.collectionType;if("datasets"==this.elementsType||"library_datasets"==this.elementsType){var r=this.creationElementsFromDatasets();"error"!==this.state&&new u.a.AjaxQueue(i.a.map(r,function(t,r){return function(){return e.creationFn(t,a,r,e.hideSourceItems)}})).done(this.oncreate).fail(this.renderFetchError)}else if("collection_contents"==this.elementsType)this.resetSource(),"error"!==this.state&&(this.saveRulesFn(this.ruleSourceJson),this.oncreate());else{var n,s=Object(o.a)().currHistoryPanel.model.id;if(a){n=[];var d=this.creationElementsForFetch();for(var p in d){var m={destination:{type:"hdca"},elements:d[p],collection_type:a,name:p};this.addNameTag&&(m.tags=["name:"+p]),n.push(m)}}else n=[{destination:{type:"hdas"},elements:this.creationDatasetsForFetch(),name:t}];"error"!==this.state&&c.a.post("".concat(Object(l.getAppRoot)(),"api/tools/fetch"),{history_id:s,targets:n,auto_decompress:!0}).then(this.refreshAndWait).catch(this.renderFetchError)}},identifierColumns:function(){var e=this.mappingAsDict,t=[];return e.list_identifiers&&(t=e.list_identifiers.columns.slice()),this.mappingAsDict.paired_identifier&&t.push(this.mappingAsDict.paired_identifier.columns[0]),t},buildRequestElements:function(e,t,a){var r=this.hotData.data,n=this.identifierColumns();if(!(n.length<1)){var s=n.length,i=this.collectionType,l={},o={},u=this.mappingAsDict.collection_name;if(u){var d=u.columns[0];for(var c in r){var p=r[c],m=p[d];o[m]||(o[m]={}),o[m][c]=p}}else o[this.collectionName]=r;for(var v in o){var h=[],f=[];for(var g in o[v])for(var y=r[g],_=i,b=h,C=f,j=0;j<s;j++){var T=String(y[n[j]]);if(j+1==s){if("paired"===_)if(["f","1","r1","forward"].indexOf(T.toLowerCase())>-1)T="forward";else{if(!(["r","2","r2","reverse"].indexOf(T.toLowerCase())>-1))return this.state="error",void(this.errorMessage="Unknown indicator of paired status encountered - only values of F, R, 1, 2, R1, R2, forward, or reverse are allowed.");T="reverse"}var w=e(g,T);if(b.push(w),C.indexOf(T)>=0)return this.state="error",void(this.errorMessage="Duplicate identifiers detected, collection identifiers must be unique.");C.push(T)}else{_=_.split(":").slice(1).join(":");for(var x=!1,R=b,F=0;F<R.length;F++){var k=R[F];if(k.name==T){b=k[a],C=C[T],x=!0;break}}if(!x){var S=t(T);b.push(S),C[T]=[];var E=[];S[a]=E,S.collection_type=_,b=E,C=C[T]}}}l[v]=h}return l}console.log("Error but this shouldn't have happened, create button should have been disabled.")},creationElementsFromDatasets:function(){var e=this,t=this.hotData,a=t.sources,r=t.data,n=this.mappingAsDict;return this.buildRequestElements(function(t,s){var i=a[t],l=e._datasetFor(t,r,n),o="datasets"==e.elementsType?"hda":"ldda";return{id:i.id,name:s,src:o,tags:l.tags}},function(e){return{name:e,src:"new_collection"}},"element_identifiers")},creationElementsForFetch:function(){var e=this,t=this.hotData.data,a=this.mappingAsDict;return this.buildRequestElements(function(r,n){var s=e._datasetFor(r,t,a);return s.name=n,s},function(e){return{name:e}},"elements")},creationDatasetsForFetch:function(){var e=this.hotData.data,t=this.mappingAsDict,a=[];for(var r in e){var n=this._datasetFor(r,e,t);a.push(n)}return a},populateElementsFromCollectionDescription:function(e,t,a){var r=a||[],n=[],s=[],i=!0,l=!1,o=void 0;try{for(var u,d=e[Symbol.iterator]();!(i=(u=d.next()).done);i=!0){var c=u.value,p=c.object,m=r.concat([c.element_identifier]),v=t.indexOf(":");if(-1===v){n.push([]);var h={identifiers:m,dataset:p,tags:p.tags};s.push(h)}else{var f=t.slice(v+1),g=this.populateElementsFromCollectionDescription(p.elements,f,m),y=g.data,_=g.sources;n=n.concat(y),s=s.concat(_)}}}catch(e){l=!0,o=e}finally{try{i||null==d.return||d.return()}finally{if(l)throw o}}return{data:n,sources:s}},highlightColumn:function(e){n()(".htCore > thead > tr > th:nth-child(".concat(e+1,")")).addClass("ht__highlight"),n()(".htCore > tbody > tr > td:nth-child(".concat(e+1,")")).addClass("rule-highlight")},unhighlightColumn:function(e){n()(".htCore > thead > tr > th:nth-child(".concat(e+1,")")).removeClass("ht__highlight"),n()(".htCore > tbody > tr > td:nth-child(".concat(e+1,")")).removeClass("rule-highlight")},_datasetFor:function(e,t,a){var r={};if(a.url){var n=a.url.columns[0],s=t[e][n];-1==s.indexOf("://")&&(s=-1!==s.indexOf("ftp.sra.")?"ftp://"+s:"http://"+s),r.url=s,r.src="url"}else if(a.ftp_path){var i=a.ftp_path.columns[0],l=t[e][i];r.ftp_path=l,r.src="ftp_import"}if(a.dbkey){var o=a.dbkey.columns[0],u=t[e][o];r.dbkey=u}else this.genome&&(r.dbkey=this.genome);if(a.file_type){var d=a.file_type.columns[0],c=t[e][d];r.ext=c}else this.extension&&(r.ext=this.extension);if(a.name){var p=a.name.columns[0],m=t[e][p];r.name=m}if(a.info){var v=a.info.columns[0],h=t[e][v];r.info=h}var f=[];if(a.tags){var g=a.tags.columns,y=!0,_=!1,b=void 0;try{for(var C,j=g[Symbol.iterator]();!(y=(C=j.next()).done);y=!0){var T=C.value,w=t[e][T];f.push(w)}}catch(e){_=!0,b=e}finally{try{y||null==j.return||j.return()}finally{if(_)throw b}}}if(a.group_tags){var x=a.group_tags.columns,R=!0,F=!1,k=void 0;try{for(var S,E=x[Symbol.iterator]();!(R=(S=E.next()).done);R=!0){var N=S.value,A=t[e][N];f.push("group:"+A)}}catch(e){F=!0,k=e}finally{try{R||null==E.return||E.return()}finally{if(F)throw k}}}if(a.name_tag){var I=a.name_tag.columns[0],D=t[e][I];f.push("name:"+D)}return f.length>0&&(r.tags=f),r}},created:function(){var e=this;if("collection_contents"!==this.elementsType){var t=null;if("datasets"==this.elementsType){var a=!0,r=!1,n=void 0;try{for(var s,i=this.initialElements[Symbol.iterator]();!(a=(s=i.next()).done);a=!0){"dataset_collection"==s.value.history_content_type&&(this.errorMessage="This component can only be used with datasets, you have specified one or more collections.",this.state="error")}}catch(e){r=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw n}}}else{var l=!0,o=!1,u=void 0;try{for(var d,c=this.initialElements[Symbol.iterator]();!(l=(d=c.next()).done);l=!0){var p=d.value;if(null==t)t=p.length;else if(t!=p.length){this.jaggedData=!0;break}}}catch(e){o=!0,u=e}finally{try{l||null==c.return||c.return()}finally{if(o)throw u}}}f.a.getUploadDatatypes(function(t){e.extensions=t,e.extension=f.a.DEFAULT_EXTENSION},!1,f.a.AUTO_EXTENSION),f.a.getUploadGenomes(function(t){e.genomes=t,e.genome=f.a.DEFAULT_GENOME},f.a.DEFAULT_GENOME)}},watch:{addColumnRegexType:function(e){"groups"==e&&(this.addColumnRegexGroupCount=1),"replacement"==e&&(this.addColumnRegexReplacement="\0")}},components:{HotTable:h.a,RuleComponent:E,RuleTargetComponent:S,RuleDisplay:F,IdentifierDisplay:k,ColumnSelector:x,RegularExpressionInput:R,StateDiv:{render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"rule-collection-creator collection-creator flex-row-container"},[this._t("default")],2)},staticRenderFns:[]},RuleModalHeader:{render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"header flex-row no-flex"},[this._t("default")],2)},staticRenderFns:[]},RuleModalMiddle:{render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"middle flex-row flex-row-container"},[this._t("default")],2)},staticRenderFns:[]},RuleModalFooter:{render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"rule-footer footer flex-row no-flex"},[this._t("inputs"),this._v(" "),t("div",{staticClass:"actions clear vertically-spaced"},[t("div",{staticClass:"main-options float-right"},[this._t("default")],2)])],2)},staticRenderFns:[]},Select2:j}},A=(a(1254),a(1255),a(11)),I=Object(A.a)(N,function(){var e=this,t=e.$createElement,a=e._self._c||t;return"build"==e.state?a("state-div",["source"==e.ruleView?a("rule-modal-header",[e._v("\n        Below is a raw JSON description of the rules to apply to the tabular data. This is an advanced setting.\n    ")]):"datasets"==e.elementsType||"library_datasets"==e.elementsType?a("rule-modal-header",[e._v("\n        Use this form to describe rules for building collection(s) from the specified datasets.\n        "),a("b",[e._v("Be sure to specify at least one column as a list identifier")]),e._v(' - specify more to created nested list\n        structures. Specify a column to serve as "collection name" to group datasets into multiple collections.\n    ')]):"datasets"==e.importType?a("rule-modal-header",[e._v("\n        Use this form to describe rules for import datasets. At least one column should be defined to a source to\n        fetch data from (URLs, FTP files, etc...).\n    ")]):a("rule-modal-header",[e._v("\n        Use this form to describe rules for import datasets. At least one column should be defined to a source to\n        fetch data from (URLs, FTP files, etc...).\n        "),a("b",[e._v("Be sure to specify at least one column as a list identifier")]),e._v(' - specify more to created nested list\n        structures. Specify a column to serve as "collection name" to group datasets into multiple collections.\n    ')]),e._v(" "),"source"==e.ruleView?a("rule-modal-middle",[e.ruleSourceError?a("p",{staticClass:"errormessagelarge"},[e._v(e._s(e.ruleSourceError))]):e._e(),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.ruleSource,expression:"ruleSource"}],staticClass:"rule-source",domProps:{value:e.ruleSource},on:{input:function(t){t.target.composing||(e.ruleSource=t.target.value)}}})]):a("rule-modal-middle",["normal"==e.ruleView?a("div",{staticClass:"rule-builder-body vertically-spaced",class:{"flex-column-container":e.vertical}},[a("div",{staticClass:"rule-column",class:e.orientation},[a("div",{staticClass:"rules-container",class:{"rules-container-vertical":e.initialElements&&e.vertical,"rules-container-horizontal":e.initialElements&&e.horizontal,"rules-container-full":null==e.initialElements}},[a("rule-component",{attrs:{"rule-type":"sort","display-rule-type":e.displayRuleType,builder:this}},[a("column-selector",{attrs:{target:e.addSortingTarget,"col-headers":e.activeRuleColHeaders},on:{"update:target":function(t){e.addSortingTarget=t}}}),e._v(" "),a("label",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:e.titleNumericSort}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.addSortingNumeric,expression:"addSortingNumeric"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.addSortingNumeric)?e._i(e.addSortingNumeric,null)>-1:e.addSortingNumeric},on:{change:function(t){var a=e.addSortingNumeric,r=t.target,n=!!r.checked;if(Array.isArray(a)){var s=e._i(a,null);r.checked?s<0&&(e.addSortingNumeric=a.concat([null])):s>-1&&(e.addSortingNumeric=a.slice(0,s).concat(a.slice(s+1)))}else e.addSortingNumeric=n}}}),e._v(" "+e._s(e.l("Numeric sorting."))+"\n                        ")])],1),e._v(" "),a("rule-component",{attrs:{"rule-type":"add_column_basename","display-rule-type":e.displayRuleType,builder:this}},[a("column-selector",{attrs:{target:e.addColumnBasenameTarget,"col-headers":e.activeRuleColHeaders},on:{"update:target":function(t){e.addColumnBasenameTarget=t}}})],1),e._v(" "),a("rule-component",{attrs:{"rule-type":"add_column_rownum","display-rule-type":e.displayRuleType,builder:this}},[a("label",[e._v("\n                            "+e._s(e.l("Starting from"))+" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.addColumnRownumStart,expression:"addColumnRownumStart"}],attrs:{type:"number",min:"0"},domProps:{value:e.addColumnRownumStart},on:{input:function(t){t.target.composing||(e.addColumnRownumStart=t.target.value)}}})])]),e._v(" "),a("rule-component",{attrs:{"rule-type":"add_column_metadata","display-rule-type":e.displayRuleType,builder:this}},[a("label",[e._v("\n                            "+e._s(e.l("For"))+"\n                            "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.addColumnMetadataValue,expression:"addColumnMetadataValue"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.addColumnMetadataValue=t.target.multiple?a:a[0]}}},e._l(e.metadataOptions,function(t,r){return a("option",{domProps:{value:r}},[e._v(e._s(t))])}),0)])]),e._v(" "),a("rule-component",{attrs:{"rule-type":"add_column_group_tag_value","display-rule-type":e.displayRuleType,builder:this}},[a("label",[e._v("\n                            "+e._s(e.l("Value"))+" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.addColumnGroupTagValueValue,expression:"addColumnGroupTagValueValue"}],attrs:{type:"text"},domProps:{value:e.addColumnGroupTagValueValue},on:{input:function(t){t.target.composing||(e.addColumnGroupTagValueValue=t.target.value)}}})]),e._v(" "),a("label",[e._v("\n                            "+e._s(e.l("Default"))+" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.addColumnGroupTagValueDefault,expression:"addColumnGroupTagValueDefault"}],attrs:{type:"text"},domProps:{value:e.addColumnGroupTagValueDefault},on:{input:function(t){t.target.composing||(e.addColumnGroupTagValueDefault=t.target.value)}}})])]),e._v(" "),a("rule-component",{attrs:{"rule-type":"add_column_regex","display-rule-type":e.displayRuleType,builder:this}},[a("column-selector",{attrs:{target:e.addColumnRegexTarget,"col-headers":e.activeRuleColHeaders},on:{"update:target":function(t){e.addColumnRegexTarget=t}}}),e._v(" "),a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.addColumnRegexType,expression:"addColumnRegexType"}],attrs:{type:"radio",value:"global"},domProps:{checked:e._q(e.addColumnRegexType,"global")},on:{change:function(t){e.addColumnRegexType="global"}}}),e._v("Create column\n                            matching expression.")]),a("br"),e._v(" "),a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.addColumnRegexType,expression:"addColumnRegexType"}],attrs:{type:"radio",value:"groups"},domProps:{checked:e._q(e.addColumnRegexType,"groups")},on:{change:function(t){e.addColumnRegexType="groups"}}}),e._v("Create columns\n                            matching expression groups.")]),a("br"),e._v(" "),a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.addColumnRegexType,expression:"addColumnRegexType"}],attrs:{type:"radio",value:"replacement"},domProps:{checked:e._q(e.addColumnRegexType,"replacement")},on:{change:function(t){e.addColumnRegexType="replacement"}}}),e._v("Create column\n                            from expression replacement.")]),a("br"),e._v(" "),a("regular-expression-input",{attrs:{target:e.addColumnRegexExpression},on:{"update:target":function(t){e.addColumnRegexExpression=t}}}),e._v(" "),"groups"==e.addColumnRegexType?a("label",[e._v("\n                            "+e._s(e.l("Number of Groups"))+"\n                            "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.addColumnRegexGroupCount,expression:"addColumnRegexGroupCount"}],attrs:{type:"number",min:"1"},domProps:{value:e.addColumnRegexGroupCount},on:{input:function(t){t.target.composing||(e.addColumnRegexGroupCount=t.target.value)}}})]):e._e(),e._v(" "),"replacement"==e.addColumnRegexType?a("label",[e._v("\n                            "+e._s(e.l("Replacement Expression"))+"\n                            "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.addColumnRegexReplacement,expression:"addColumnRegexReplacement"}],staticClass:"rule-replacement",attrs:{type:"text"},domProps:{value:e.addColumnRegexReplacement},on:{input:function(t){t.target.composing||(e.addColumnRegexReplacement=t.target.value)}}})]):e._e()],1),e._v(" "),a("rule-component",{attrs:{"rule-type":"add_column_concatenate","display-rule-type":e.displayRuleType,builder:this}},[a("column-selector",{attrs:{target:e.addColumnConcatenateTarget0,"col-headers":e.activeRuleColHeaders},on:{"update:target":function(t){e.addColumnConcatenateTarget0=t}}}),e._v(" "),a("column-selector",{attrs:{target:e.addColumnConcatenateTarget1,"col-headers":e.activeRuleColHeaders},on:{"update:target":function(t){e.addColumnConcatenateTarget1=t}}})],1),e._v(" "),a("rule-component",{attrs:{"rule-type":"add_column_substr","display-rule-type":e.displayRuleType,builder:this}},[a("column-selector",{attrs:{target:e.addColumnSubstrTarget,"col-headers":e.activeRuleColHeaders},on:{"update:target":function(t){e.addColumnSubstrTarget=t}}}),e._v(" "),a("label",[a("select",{directives:[{name:"model",rawName:"v-model",value:e.addColumnSubstrType,expression:"addColumnSubstrType"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.addColumnSubstrType=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"keep_prefix"}},[e._v("Keep only prefix specified.")]),e._v(" "),a("option",{attrs:{value:"drop_prefix"}},[e._v("Strip off prefix specified.")]),e._v(" "),a("option",{attrs:{value:"keep_suffix"}},[e._v("Keep only suffix specified.")]),e._v(" "),a("option",{attrs:{value:"drop_suffix"}},[e._v("Strip off suffix specified.")])])]),e._v(" "),a("label",[e._v("\n                            "+e._s(e.l("Prefix or suffix length"))+"\n                            "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.addColumnSubstrLength,expression:"addColumnSubstrLength"}],attrs:{type:"number",min:"0"},domProps:{value:e.addColumnSubstrLength},on:{input:function(t){t.target.composing||(e.addColumnSubstrLength=t.target.value)}}})])],1),e._v(" "),a("rule-component",{attrs:{"rule-type":"add_column_value","display-rule-type":e.displayRuleType,builder:this}},[a("label",[e._v(" "+e._s(e.l("Value"))+" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.addColumnValue,expression:"addColumnValue"}],attrs:{type:"text"},domProps:{value:e.addColumnValue},on:{input:function(t){t.target.composing||(e.addColumnValue=t.target.value)}}})])]),e._v(" "),a("rule-component",{attrs:{"rule-type":"remove_columns","display-rule-type":e.displayRuleType,builder:this}},[a("column-selector",{attrs:{target:e.removeColumnTargets,"col-headers":e.activeRuleColHeaders,multiple:!0},on:{"update:target":function(t){e.removeColumnTargets=t}}})],1),e._v(" "),a("rule-component",{attrs:{"rule-type":"split_columns","display-rule-type":e.displayRuleType,builder:this}},[a("column-selector",{attrs:{target:e.splitColumnsTargets0,label:"Odd Row Column(s)","col-headers":e.activeRuleColHeaders,multiple:!0},on:{"update:target":function(t){e.splitColumnsTargets0=t}}}),e._v(" "),a("column-selector",{attrs:{target:e.splitColumnsTargets1,label:"Even Row Column(s)","col-headers":e.activeRuleColHeaders,multiple:!0},on:{"update:target":function(t){e.splitColumnsTargets1=t}}})],1),e._v(" "),a("rule-component",{attrs:{"rule-type":"swap_columns","display-rule-type":e.displayRuleType,builder:this}},[a("column-selector",{attrs:{target:e.swapColumnsTarget0,label:"Swap Column","col-headers":e.activeRuleColHeaders},on:{"update:target":function(t){e.swapColumnsTarget0=t}}}),e._v(" "),a("column-selector",{attrs:{target:e.swapColumnsTarget1,label:"With Column","col-headers":e.activeRuleColHeaders},on:{"update:target":function(t){e.swapColumnsTarget1=t}}})],1),e._v(" "),a("rule-component",{attrs:{"rule-type":"add_filter_regex","display-rule-type":e.displayRuleType,builder:this}},[a("column-selector",{attrs:{target:e.addFilterRegexTarget,"col-headers":e.activeRuleColHeaders},on:{"update:target":function(t){e.addFilterRegexTarget=t}}}),e._v(" "),a("regular-expression-input",{attrs:{target:e.addFilterRegexExpression},on:{"update:target":function(t){e.addFilterRegexExpression=t}}}),e._v(" "),a("label",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:e.titleInvertFilterRegex}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.addFilterRegexInvert,expression:"addFilterRegexInvert"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.addFilterRegexInvert)?e._i(e.addFilterRegexInvert,null)>-1:e.addFilterRegexInvert},on:{change:function(t){var a=e.addFilterRegexInvert,r=t.target,n=!!r.checked;if(Array.isArray(a)){var s=e._i(a,null);r.checked?s<0&&(e.addFilterRegexInvert=a.concat([null])):s>-1&&(e.addFilterRegexInvert=a.slice(0,s).concat(a.slice(s+1)))}else e.addFilterRegexInvert=n}}}),e._v(" "+e._s(e.l("Invert filter."))+"\n                        ")])],1),e._v(" "),a("rule-component",{attrs:{"rule-type":"add_filter_matches","display-rule-type":e.displayRuleType,builder:this}},[a("column-selector",{attrs:{target:e.addFilterMatchesTarget,"col-headers":e.activeRuleColHeaders},on:{"update:target":function(t){e.addFilterMatchesTarget=t}}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.addFilterMatchesValue,expression:"addFilterMatchesValue"}],attrs:{type:"text"},domProps:{value:e.addFilterMatchesValue},on:{input:function(t){t.target.composing||(e.addFilterMatchesValue=t.target.value)}}}),e._v(" "),a("label",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:e.titleInvertFilterMatches}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.addFilterMatchesInvert,expression:"addFilterMatchesInvert"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.addFilterMatchesInvert)?e._i(e.addFilterMatchesInvert,null)>-1:e.addFilterMatchesInvert},on:{change:function(t){var a=e.addFilterMatchesInvert,r=t.target,n=!!r.checked;if(Array.isArray(a)){var s=e._i(a,null);r.checked?s<0&&(e.addFilterMatchesInvert=a.concat([null])):s>-1&&(e.addFilterMatchesInvert=a.slice(0,s).concat(a.slice(s+1)))}else e.addFilterMatchesInvert=n}}}),e._v(" "+e._s(e.l("Invert filter."))+"\n                        ")])],1),e._v(" "),a("rule-component",{attrs:{"rule-type":"add_filter_compare","display-rule-type":e.displayRuleType,builder:this}},[a("column-selector",{attrs:{target:e.addFilterCompareTarget,"col-headers":e.activeRuleColHeaders},on:{"update:target":function(t){e.addFilterCompareTarget=t}}}),e._v(" "),a("label",[e._v("\n                            Filter out rows\n                            "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.addFilterCompareType,expression:"addFilterCompareType"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.addFilterCompareType=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"less_than"}},[e._v(e._s(e.l("less than"))+" ")]),e._v(" "),a("option",{attrs:{value:"less_than_equal"}},[e._v(e._s(e.l("less than or equal to")))]),e._v(" "),a("option",{attrs:{value:"greater_than"}},[e._v(e._s(e.l("greater than")))]),e._v(" "),a("option",{attrs:{value:"greater_than_equal"}},[e._v(e._s(e.l("greater than or equal to")))])])]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.addFilterCompareValue,expression:"addFilterCompareValue"}],attrs:{type:"text"},domProps:{value:e.addFilterCompareValue},on:{input:function(t){t.target.composing||(e.addFilterCompareValue=t.target.value)}}})],1),e._v(" "),a("rule-component",{attrs:{"rule-type":"add_filter_count","display-rule-type":e.displayRuleType,builder:this}},[a("label",[e._v("\n                            Filter which rows?\n                            "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.addFilterCountWhich,expression:"addFilterCountWhich"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.addFilterCountWhich=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"first"}},[e._v("first")]),e._v(" "),a("option",{attrs:{value:"last"}},[e._v("last")])])]),e._v(" "),a("label",[e._v(" Filter how many rows? "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.addFilterCountN,expression:"addFilterCountN"}],attrs:{type:"number"},domProps:{value:e.addFilterCountN},on:{input:function(t){t.target.composing||(e.addFilterCountN=t.target.value)}}})]),e._v(" "),a("label",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:e.titleInvertFilterMatches}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.addFilterCountInvert,expression:"addFilterCountInvert"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.addFilterCountInvert)?e._i(e.addFilterCountInvert,null)>-1:e.addFilterCountInvert},on:{change:function(t){var a=e.addFilterCountInvert,r=t.target,n=!!r.checked;if(Array.isArray(a)){var s=e._i(a,null);r.checked?s<0&&(e.addFilterCountInvert=a.concat([null])):s>-1&&(e.addFilterCountInvert=a.slice(0,s).concat(a.slice(s+1)))}else e.addFilterCountInvert=n}}}),e._v(" "+e._s(e.l("Invert filter."))+"\n                        ")])]),e._v(" "),a("rule-component",{attrs:{"rule-type":"add_filter_empty","display-rule-type":e.displayRuleType,builder:this}},[a("column-selector",{attrs:{target:e.addFilterEmptyTarget,"col-headers":e.activeRuleColHeaders},on:{"update:target":function(t){e.addFilterEmptyTarget=t}}}),e._v(" "),a("label",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:e.titleInvertFilterEmpty}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.addFilterEmptyInvert,expression:"addFilterEmptyInvert"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.addFilterEmptyInvert)?e._i(e.addFilterEmptyInvert,null)>-1:e.addFilterEmptyInvert},on:{change:function(t){var a=e.addFilterEmptyInvert,r=t.target,n=!!r.checked;if(Array.isArray(a)){var s=e._i(a,null);r.checked?s<0&&(e.addFilterEmptyInvert=a.concat([null])):s>-1&&(e.addFilterEmptyInvert=a.slice(0,s).concat(a.slice(s+1)))}else e.addFilterEmptyInvert=n}}}),e._v(" "+e._s(e.l("Invert filter."))+"\n                        ")])],1),e._v(" "),"mapping"==e.displayRuleType?a("div",[e._l(e.mapping,function(t,r){return a("div",{key:t.type,staticClass:"map",attrs:{index:r}},[a("column-selector",{class:"rule-map-"+t.type.replace(/_/g,"-"),attrs:{label:e.mappingTargets()[t.type].label,help:e.mappingTargets()[t.type].help,target:t.columns,"ordered-edit":t.editing,"col-headers":e.colHeaders,multiple:e.mappingTargets()[t.type].multiple,ordered:!0,"value-as-list":!0},on:{"update:target":function(a){return e.$set(t,"columns",a)},"update:orderedEdit":function(a){return e.$set(t,"editing",a)},"update:ordered-edit":function(a){return e.$set(t,"editing",a)}}},[a("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-times",attrs:{title:e.titleRemoveMapping},on:{click:function(t){return e.removeMapping(r)}}})])],1)}),e._v(" "),a("div",{staticClass:"buttons rule-edit-buttons d-flex justify-content-end"},[e.unmappedTargets.length>0?a("button",{staticClass:"dropdown-toggle btn btn-primary mr-1",attrs:{type:"button","data-toggle":"dropdown"}},[a("span",{staticClass:"fa fa-plus rule-add-mapping"}),e._v(" "+e._s("Add Definition")),a("span",{staticClass:"caret"})]):e._e(),e._v(" "),a("div",{staticClass:"dropdown-menu",attrs:{role:"menu"}},e._l(e.unmappedTargets,function(t){return a("a",{key:t,staticClass:"dropdown-item",class:"rule-add-mapping-"+t.replace(/_/g,"-"),attrs:{index:t,href:"javascript:void(0)"},on:{click:function(a){return e.addIdentifier(t)}}},[e._v("\n                                    "+e._s(e.mappingTargets()[t].label)+"\n                                ")])}),0),e._v(" "),e.hasActiveMappingEdit?e._e():a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],staticClass:"rule-mapping-ok",attrs:{title:e.titleApplyColumnDefinitions},on:{click:function(t){e.displayRuleType=null}}},[e._v(e._s(e.l("Apply")))])],1)],2):e._e(),e._v(" "),null==e.displayRuleType?a("div",{staticClass:"rule-summary"},[a("span",{staticClass:"title"},[e._v("\n                            "+e._s(e.l("Rules"))+"\n                            "),a("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-wrench rule-builder-view-source",attrs:{title:e.titleViewSource},on:{click:e.viewSource}})]),e._v(" "),e.jaggedData?a("div",{staticClass:"rule-warning"},[e._v("\n                            Rows contain differing numbers of columns, there was likely a problem parsing your data.\n                        ")]):e._e(),e._v(" "),a("ol",{staticClass:"rules"},[e._l(e.rules,function(t,r){return a("rule-display",{key:r,attrs:{rule:t,index:r,"col-headers":e.colHeadersPerRule[r]},on:{edit:function(a){return e.editRule(t,r)},remove:function(t){return e.removeRule(r)}}})}),e._v(" "),e._l(e.mapping,function(t,r){return a("identifier-display",e._b({key:t.type,attrs:{index:r,"col-headers":e.colHeaders},on:{remove:function(t){return e.removeMapping(r)},edit:function(t){e.displayRuleType="mapping"}},nativeOn:{mouseover:function(a){t.columns.forEach(function(t){return e.highlightColumn(t)})},mouseout:function(a){t.columns.forEach(function(t){return e.unhighlightColumn(t)})}}},"identifier-display",t,!1))}),e._v(" "),0==e.mapping.length?a("div",[e._v("\n                                One or more column definitions must be specified. These are required to specify how\n                                to build collections and datasets from rows and columns of the table.\n                                "),a("a",{attrs:{href:"javascript:void(0)"},on:{click:function(t){e.displayRuleType="mapping"}}},[e._v("Click here")]),e._v(" to\n                                manage column definitions.\n                            ")]):e._e()],2),e._v(" "),a("div",{staticClass:"rules-buttons"},[a("div",{staticClass:"btn-group dropup"},[a("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],staticClass:"rule-menu-rules-button primary-button dropdown-toggle",attrs:{type:"button",title:e.titleRulesMenu,"data-toggle":"dropdown"}},[a("span",{staticClass:"fa fa-plus"}),e._v(" "+e._s(e.l("Rules"))),a("span",{staticClass:"caret"})]),e._v(" "),a("div",{staticClass:"dropdown-menu",attrs:{role:"menu"}},[a("rule-target-component",{attrs:{builder:this,"rule-type":"sort"}}),e._v(" "),a("rule-target-component",{attrs:{builder:this,"rule-type":"remove_columns"}}),e._v(" "),a("rule-target-component",{attrs:{builder:this,"rule-type":"split_columns"}}),e._v(" "),a("rule-target-component",{attrs:{builder:this,"rule-type":"swap_columns"}}),e._v(" "),a("a",{staticClass:"dropdown-item rule-link rule-link-mapping",attrs:{href:"javascript:void(0)"},on:{click:function(t){e.displayRuleType="mapping"}}},[e._v("Add / Modify Column Definitions")])],1)]),e._v(" "),a("div",{staticClass:"btn-group dropup"},[a("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],staticClass:"rule-menu-filter-button primary-button dropdown-toggle",attrs:{type:"button",title:e.titleFilterMenu,"data-toggle":"dropdown"}},[a("span",{staticClass:"fa fa-plus"}),e._v(" "+e._s(e.l("Filter"))),a("span",{staticClass:"caret"})]),e._v(" "),a("div",{staticClass:"dropdown-menu",attrs:{role:"menu"}},[a("rule-target-component",{attrs:{builder:this,"rule-type":"add_filter_regex"}}),e._v(" "),a("rule-target-component",{attrs:{builder:this,"rule-type":"add_filter_matches"}}),e._v(" "),a("rule-target-component",{attrs:{builder:this,"rule-type":"add_filter_compare"}}),e._v(" "),a("rule-target-component",{attrs:{builder:this,"rule-type":"add_filter_empty"}}),e._v(" "),a("rule-target-component",{attrs:{builder:this,"rule-type":"add_filter_count"}})],1)]),e._v(" "),a("div",{staticClass:"btn-group dropup"},[a("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",modifiers:{hover:!0,bottom:!0}}],staticClass:"rule-menu-column-button primary-button dropdown-toggle",attrs:{type:"button",title:e.titleColumMenu,"data-toggle":"dropdown"}},[a("span",{staticClass:"fa fa-plus"}),e._v(" "+e._s(e.l("Column"))),a("span",{staticClass:"caret"})]),e._v(" "),a("div",{staticClass:"dropdown-menu",attrs:{role:"menu"}},[a("rule-target-component",{attrs:{builder:this,"rule-type":"add_column_basename"}}),e._v(" "),e.metadataOptions?a("rule-target-component",{attrs:{builder:this,"rule-type":"add_column_metadata"}}):e._e(),e._v(" "),e.hasTagsMetadata?a("rule-target-component",{attrs:{builder:this,"rule-type":"add_column_group_tag_value"}}):e._e(),e._v(" "),a("rule-target-component",{attrs:{builder:this,"rule-type":"add_column_regex"}}),e._v(" "),a("rule-target-component",{attrs:{builder:this,"rule-type":"add_column_concatenate"}}),e._v(" "),a("rule-target-component",{attrs:{builder:this,"rule-type":"add_column_rownum"}}),e._v(" "),a("rule-target-component",{attrs:{builder:this,"rule-type":"add_column_value"}}),e._v(" "),a("rule-target-component",{attrs:{builder:this,"rule-type":"add_column_substr"}})],1)])])]):e._e()],1)]),e._v(" "),null!==e.initialElements?a("div",{staticClass:"table-column",class:e.orientation,staticStyle:{width:"100%"}},[a("hot-table",{ref:"hotTable",attrs:{id:"hot-table",data:e.hotData.data,colHeaders:e.colHeadersDisplay,readOnly:!0,stretchH:"all"}})],1):e._e()]):e._e()]),e._v(" "),"source"==e.ruleView?a("rule-modal-footer",[a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"rule-btn-cancel",attrs:{title:e.titleSourceCancel},on:{click:e.cancelSourceEdit}},[e._v("\n            "+e._s(e.l("Cancel"))+"\n        ")]),e._v(" "),a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"creator-reset-btn rule-btn-reset",attrs:{title:e.titleSourceReset}},[e._v("\n            "+e._s(e.l("Reset"))+"\n        ")]),e._v(" "),a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"rule-btn-okay",attrs:{title:e.titleSourceApply},on:{click:e.attemptRulePreview}},[e._v("\n            "+e._s(e.l("Apply"))+"\n        ")])],1):"normal"==e.ruleView?a("rule-modal-footer",[a("div",{staticClass:"rule-footer-inputs",attrs:{slot:"inputs"},slot:"inputs"},["datasets"==e.elementsType?a("label",[e._v(" "+e._s(e.l("Hide original elements"))+": ")]):e._e(),e._v(" "),"datasets"==e.elementsType?a("input",{directives:[{name:"model",rawName:"v-model",value:e.hideSourceItems,expression:"hideSourceItems"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.hideSourceItems)?e._i(e.hideSourceItems,null)>-1:e.hideSourceItems},on:{change:function(t){var a=e.hideSourceItems,r=t.target,n=!!r.checked;if(Array.isArray(a)){var s=e._i(a,null);r.checked?s<0&&(e.hideSourceItems=a.concat([null])):s>-1&&(e.hideSourceItems=a.slice(0,s).concat(a.slice(s+1)))}else e.hideSourceItems=n}}}):e._e(),e._v(" "),e.extension&&e.showFileTypeSelector?a("div",{staticClass:"rule-footer-extension-group"},[a("label",[e._v(" "+e._s(e.l("Type"))+": ")]),e._v(" "),a("select2",{staticClass:"extension-select",attrs:{name:"extension"},model:{value:e.extension,callback:function(t){e.extension=t},expression:"extension"}},e._l(e.extensions,function(t){return a("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.text))])}),0)],1):e._e(),e._v(" "),e.genome&&e.showGenomeSelector?a("div",{staticClass:"rule-footer-genome-group"},[a("label",[e._v(" "+e._s(e.l("Genome"))+": ")]),e._v(" "),a("select2",{staticClass:"genome-select",model:{value:e.genome,callback:function(t){e.genome=t},expression:"genome"}},e._l(e.genomes,function(t){return a("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.text))])}),0)],1):e._e(),e._v(" "),e.showAddNameTag?a("label",[e._v(" "+e._s(e.l("Add nametag for name"))+": ")]):e._e(),e._v(" "),e.showAddNameTag?a("input",{directives:[{name:"model",rawName:"v-model",value:e.addNameTag,expression:"addNameTag"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.addNameTag)?e._i(e.addNameTag,null)>-1:e.addNameTag},on:{change:function(t){var a=e.addNameTag,r=t.target,n=!!r.checked;if(Array.isArray(a)){var s=e._i(a,null);r.checked?s<0&&(e.addNameTag=a.concat([null])):s>-1&&(e.addNameTag=a.slice(0,s).concat(a.slice(s+1)))}else e.addNameTag=n}}}):e._e(),e._v(" "),e.showCollectionNameInput?a("div",{staticClass:"rule-footer-name-group"},[a("b-input",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"collection-name",attrs:{placeholder:e.namePlaceholder,title:e.namePlaceholder},model:{value:e.collectionName,callback:function(t){e.collectionName=t},expression:"collectionName"}}),e._v(" "),a("label",[e._v(" "+e._s(e.l("Name"))+": ")])],1):e._e()]),e._v(" "),a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"creator-cancel-btn rule-btn-cancel",attrs:{help:e.titleCancel,tabindex:"-1"},on:{click:e.cancel}},[e._v("\n            "+e._s(e.l("Cancel"))+"\n        ")]),e._v(" "),a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"creator-reset-btn rule-btn-reset",attrs:{title:e.titleReset},on:{click:e.resetRulesAndState}},[e._v("\n            "+e._s(e.l("Reset"))+"\n        ")]),e._v(" "),a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"create-collection rule-btn-okay",attrs:{title:e.titleFinish,variant:"primary",disabled:!e.validInput},on:{click:e.createCollection}},[e._v("\n            "+e._s(e.finishButtonTitle)+"\n        ")])],1):e._e()],1):"wait"==e.state?a("state-div",["datasets"==e.importType?a("rule-modal-header",[e._v("\n        "+e._s(e.l("Datasets submitted to Galaxy for creation, this dialog will close when dataset creation is complete. You may close this dialog at any time, but you will not be informed of errors with dataset creation and you may have to refresh your history manually to view new datasets once complete."))+"\n    ")]):"collections"==e.importType?a("rule-modal-header",[e._v("\n        "+e._s(e.l("Galaxy is waiting for collection creation, this dialog will close when this is complete. You may close this dialog at any time, but you will not be informed of errors with collection creation and you may have to refresh your history manually to view new collections once complete."))+"\n    ")]):e._e(),e._v(" "),a("rule-modal-footer",[a("b-button",{staticClass:"creator-cancel-btn",attrs:{tabindex:"-1"},on:{click:e.cancel}},[e._v(" "+e._s(e.l("Close"))+" ")])],1)],1):"error"==e.state?a("state-div",[a("rule-modal-header",[e._v(" A problem was encountered. ")]),e._v(" "),a("rule-modal-middle",[a("p",{staticClass:"errormessagelarge"},[e._v(e._s(e.errorMessage))])]),e._v(" "),a("rule-modal-footer",[a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"creator-cancel-btn",attrs:{title:e.titleCancel,tabindex:"-1"},on:{click:e.cancel}},[e._v("\n            "+e._s(e.l("Close"))+"\n        ")]),e._v(" "),a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:e.titleErrorOkay,tabindex:"-1"},on:{click:function(t){e.state="build"}}},[e._v("\n            "+e._s(e.l("Okay"))+"\n        ")])],1)],1):e._e()},[],!1,null,null,null);t.default=I.exports}}]);